# Photosphere - Plateforme de Partage de Photos

Photosphere est une application web de gestion et partage de photos dÃ©veloppÃ©e en PHP orientÃ© objet, avec une architecture MVC et une gestion avancÃ©e des utilisateurs, albums, et tags.

## ğŸ¯ FonctionnalitÃ©s Principales

### Gestion des Utilisateurs
- **Types d'utilisateurs** : Administrator, Moderator, ProUser, BasicUser
- **Authentification** : SystÃ¨me de login sÃ©curisÃ©
- **Archivage** : PossibilitÃ© d'archiver les comptes utilisateurs
- **Permissions** : Gestion des droits selon le rÃ´le

### Gestion des Photos
- **Upload** : TÃ©lÃ©chargement de photos avec mÃ©tadonnÃ©es
- **Tags** : SystÃ¨me de tags pour catÃ©goriser les photos
- **Recherche** : Recherche par titre, description, ou tags
- **Archivage** : Archivage des photos
- **Interactions** : Likes et commentaires

### Gestion des Albums
- **CrÃ©ation** : Albums publics ou privÃ©s
- **Organisation** : Association de photos aux albums (Many-to-Many)
- **Permissions** : Albums privÃ©s rÃ©servÃ©s aux utilisateurs Pro/Moderator/Admin

### SystÃ¨me de Tags
- **Tags populaires** : Statistiques d'utilisation
- **Recherche** : Recherche de tags par nom
- **Association** : Liaison flexible entre photos et tags
- **Fusion de tags** : Merge de tags en double (PhotoCommunity)
- **Statistiques avancÃ©es** : Stats dÃ©taillÃ©es par tag (PhotoCommunity)

### Interactions Sociales (PhotoCommunity)
- **Commentaires** : SystÃ¨me complet de commentaires avec archivage
- **Likes** : SystÃ¨me de likes avec compteurs et vÃ©rifications
- **Repositories dÃ©diÃ©s** : `CommentRepository` et `LikeRepository`

## ğŸ—ï¸ Architecture

### Structure du Projet
```
photosphere/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â””â”€â”€ Database.php          # Singleton de connexion DB
â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â”œâ”€â”€ User.php              # Classe abstraite User
â”‚   â”‚   â”œâ”€â”€ Administrator.php
â”‚   â”‚   â”œâ”€â”€ Moderator.php
â”‚   â”‚   â”œâ”€â”€ ProUser.php
â”‚   â”‚   â”œâ”€â”€ BasicUser.php
â”‚   â”‚   â”œâ”€â”€ Photo.php
â”‚   â”‚   â”œâ”€â”€ Album.php
â”‚   â”‚   â”œâ”€â”€ Tag.php
â”‚   â”‚   â”œâ”€â”€ Comment.php           # NEW (PhotoCommunity)
â”‚   â”‚   â””â”€â”€ Like.php              # NEW (PhotoCommunity)
â”‚   â”œâ”€â”€ Repositories/
â”‚   â”‚   â”œâ”€â”€ UserRepository.php
â”‚   â”‚   â”œâ”€â”€ PhotoRepository.php
â”‚   â”‚   â”œâ”€â”€ AlbumRepository.php
â”‚   â”‚   â”œâ”€â”€ TagRepository.php
â”‚   â”‚   â”œâ”€â”€ CommentRepository.php # NEW (PhotoCommunity)
â”‚   â”‚   â””â”€â”€ LikeRepository.php    # NEW (PhotoCommunity)
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â””â”€â”€ UserFactory.php       # Factory pour crÃ©er les utilisateurs
â”‚   â”œâ”€â”€ Traits/
â”‚   â”‚   â”œâ”€â”€ TaggableTrait.php
â”‚   â”‚   â”œâ”€â”€ TimestampableTrait.php
â”‚   â”‚   â”œâ”€â”€ LikeableTrait.php
â”‚   â”‚   â””â”€â”€ CommentableTrait.php
â”‚   â””â”€â”€ Interfaces/
â”‚       â”œâ”€â”€ RepositoryInterface.php
â”‚       â”œâ”€â”€ Taggable.php
â”‚       â”œâ”€â”€ Commentable.php
â”‚       â””â”€â”€ Likeable.php
â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ 01_add_status_to_user.php
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_functional_flow.php  # Test principal (10 Ã©tapes)
â”‚   â”œâ”€â”€ day3_tests.php
â”‚   â”œâ”€â”€ test_inheritance.php
â”‚   â””â”€â”€ test_interfaces_traits.php
â”œâ”€â”€ shema.sql                     # SchÃ©ma de base de donnÃ©es
â””â”€â”€ README.md
```

### Base de DonnÃ©es

**Tables principales** :
- `user` : Utilisateurs avec rÃ´les et statuts
- `post` : Photos avec mÃ©tadonnÃ©es
- `album` : Albums de photos
- `tags` : Tags disponibles
- `post_tag` : Relation Many-to-Many (Photos â†” Tags)
- `album_post` : Relation Many-to-Many (Albums â†” Photos)
- `comments` : Commentaires sur les photos
- `likes` : Likes sur les photos

## ğŸš€ Installation

### PrÃ©requis
- PHP 8.0+
- MySQL/MariaDB
- XAMPP (ou Ã©quivalent)

### Configuration

1. **Cloner le projet**
   ```bash
   cd c:\xampp\htdocs\
   git clone <votre-repo> photosphere
   ```

2. **CrÃ©er la base de donnÃ©es**
   ```bash
   mysql -u root -p < shema.sql
   ```

3. **ExÃ©cuter les migrations**
   ```bash
   php migrations/01_add_status_to_user.php
   ```

4. **Configurer la connexion DB**
   
   Modifier `app/Core/Database.php` si nÃ©cessaire :
   ```php
   private $host = 'localhost';
   private $dbname = 'photosphere';
   private $username = 'root';
   private $password = '';
   ```

## ğŸ§ª Tests

### Test Principal
ExÃ©cuter le test de flux fonctionnel complet :
```bash
php tests/test_functional_flow.php
```

Ce test vÃ©rifie :
- âœ… CrÃ©ation d'utilisateur
- âœ… CrÃ©ation d'album
- âœ… CrÃ©ation de photo avec tags
- âœ… Liaison photo-album
- âœ… Recherche de photos
- âœ… Interactions (Traits)
- âœ… Archivage d'utilisateur
- âœ… **Commentaires** (PhotoCommunity)
- âœ… **Likes** (PhotoCommunity)
- âœ… **Statistiques de tags** (PhotoCommunity)

### Tests Unitaires
```bash
php tests/test_inheritance.php
php tests/test_interfaces_traits.php
php tests/day3_tests.php
```

## ğŸ“‹ Utilisation

### Exemple : CrÃ©er un Utilisateur
```php
use App\Repositories\UserRepository;
use App\Entities\BasicUser;

$userRepo = new UserRepository();
$user = new BasicUser(0, "john_doe", "john@example.com", "password123", "basicuser", date('Y-m-d H:i:s'));
$userId = $userRepo->save($user);
```

### Exemple : CrÃ©er un Album
```php
use App\Repositories\AlbumRepository;
use App\Entities\Album;

$albumRepo = new AlbumRepository();
$album = new Album(0, "Vacances 2024", true, "Photos de vacances", 0, null, $userId);
$albumRepo->save($album);
```

### Exemple : Uploader une Photo avec Tags
```php
use App\Repositories\PhotoRepository;
use App\Entities\Photo;

$photoRepo = new PhotoRepository();
$photo = new Photo(0, "Coucher de soleil", "Belle vue", "sunset.jpg", 2048, "1920x1080", "draft", 0, null, null, null, $userId, null);
$photoRepo->saveWithTags($photo, ['nature', 'voyage', 'sunset']);
```

### Exemple : Ajouter un Commentaire (PhotoCommunity)
```php
use App\Repositories\CommentRepository;

$commentRepo = new CommentRepository();
$comment = $commentRepo->create("Superbe photo !", $userId, $photoId);
```

### Exemple : Ajouter un Like (PhotoCommunity)
```php
use App\Repositories\LikeRepository;

$likeRepo = new LikeRepository();
$likeRepo->addLike($userId, $photoId);
```

### Exemple : Fusionner des Tags (PhotoCommunity)
```php
use App\Repositories\TagRepository;

$tagRepo = new TagRepository();
// Fusionner 'sunset-pics' dans 'sunset'
$tagRepo->mergeTags('sunset-pics', 'sunset');
```

### Exemple : Obtenir des Statistiques de Tag (PhotoCommunity)
```php
$stats = $tagRepo->getTagStats('nature');
echo "Tag: " . $stats['tag']->getName();
echo "Photos: " . $stats['totalPhotos'];
echo "Utilisateurs: " . $stats['totalUsers'];
```

## ğŸ”‘ Concepts POO UtilisÃ©s

- **HÃ©ritage** : User â†’ Administrator, Moderator, ProUser, BasicUser
- **Abstraction** : Classe abstraite `User`
- **Interfaces** : `RepositoryInterface`, `Taggable`, `Commentable`, `Likeable`
- **Traits** : RÃ©utilisation de code (TaggableTrait, LikeableTrait, etc.)
- **Factory Pattern** : `UserFactory` pour instancier les bons types d'utilisateurs
- **Repository Pattern** : SÃ©paration logique mÃ©tier / accÃ¨s donnÃ©es
- **Singleton** : `Database` pour une connexion unique
- **Encapsulation** : PropriÃ©tÃ©s privÃ©es avec getters/setters

## ğŸ“Š FonctionnalitÃ©s AvancÃ©es

### SystÃ¨me de Commentaires
- CrÃ©ation de commentaires
- RÃ©cupÃ©ration par photo
- Archivage de commentaires
- Comptage de commentaires

### SystÃ¨me de Likes
- Ajout/suppression de likes
- VÃ©rification si un utilisateur a likÃ©
- Comptage de likes par photo
- RÃ©cupÃ©ration des likes par utilisateur

### Gestion AvancÃ©e des Tags
- Normalisation automatique des slugs
- Fusion de tags en double
- Statistiques dÃ©taillÃ©es (nombre de photos, utilisateurs)
- Recherche intelligente

## ğŸ¯ Comparaison avec les Projets de RÃ©fÃ©rence

| FonctionnalitÃ© | PHOTOSPHERE_POO | PhotoCommunity | Photosphere |
|----------------|-----------------|----------------|-------------|
| Gestion Utilisateurs | âœ… | âœ… | âœ… |
| Albums | âœ… | âœ… | âœ… |
| Photos | âœ… | âœ… | âœ… |
| Tags | âœ… | âœ… | âœ… |
| Archivage | âœ… | âœ… | âœ… |
| EntitÃ©s Comment/Like | âŒ | âœ… | âœ… |
| CommentRepository | âŒ | âœ… | âœ… |
| LikeRepository | âŒ | âœ… | âœ… |
| Tag Stats | âŒ | âœ… | âœ… |
| Tag Merging | âŒ | âœ… | âœ… |
| Slug System | âŒ | âœ… | âœ… |

## ğŸ“ Licence

Ce projet est dÃ©veloppÃ© dans un cadre Ã©ducatif.

## ğŸ‘¥ Auteur

DÃ©veloppÃ© dans le cadre d'un projet de formation en Programmation OrientÃ©e Objet (POO) avec PHP.

---

## ğŸ‰ Statut du Projet

âœ… **100% Fonctionnel** - Toutes les fonctionnalitÃ©s de `PHOTOSPHERE_POO` et `PHOTOSPHERE-PhotoCommunity` sont implÃ©mentÃ©es et testÃ©es.
